name: Deploy to GitHub Pages

on:
  push:
    branches:
      - main
  workflow_dispatch:

permissions:
  contents: read
  pages: write
  id-token: write

concurrency:
  group: "pages"
  cancel-in-progress: false

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      
      - name: Setup Pages
        uses: actions/configure-pages@v4
      
      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: '.'
      
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      
      - name: Deployment URL
        if: success()
        run: |
          echo "âœ… ë°°í¬ ì„±ê³µ!"
          echo "ğŸŒ ì‚¬ì´íŠ¸ URL: https://sellfarmb2b.github.io/nanobanana/"
      
      - name: Setup Instructions
        if: failure()
        run: |
          echo "::error::âŒ GitHub Pagesê°€ í™œì„±í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤."
          echo ""
          echo "ğŸ“‹ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ë”°ë¼ì£¼ì„¸ìš”:"
          echo ""
          echo "1ï¸âƒ£  GitHub ì €ì¥ì†Œë¡œ ì´ë™:"
          echo "   https://github.com/sellfarmb2b/nanobanana"
          echo ""
          echo "2ï¸âƒ£  Settings íƒ­ í´ë¦­"
          echo ""
          echo "3ï¸âƒ£  ì™¼ìª½ ì‚¬ì´ë“œë°”ì—ì„œ 'Pages' í´ë¦­"
          echo ""
          echo "4ï¸âƒ£  'Source' ì„¹ì…˜ì—ì„œ 'GitHub Actions' ì„ íƒ"
          echo ""
          echo "5ï¸âƒ£  ì €ì¥ í›„ ì´ ì›Œí¬í”Œë¡œìš°ë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•˜ì„¸ìš”"
          echo ""
          echo "ğŸ”— ì§ì ‘ ë§í¬:"
          echo "   https://github.com/sellfarmb2b/nanobanana/settings/pages"
          exit 1

